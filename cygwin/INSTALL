Created on: Thu 27 Jul 2006 09:43:26 PM
Last saved: Thu 27 Jul 2006 11:21:07 PM

=================================================================
                 Installing with CPAN on Cygwin
=================================================================
If you already have a full cygwin install on your PC, the
simplest way to get a basic PDL is to use the cpan shell.

This will get you all the functionality that is supported
by existing cygwin package functionality (i.e. available
from the standard Setup.exe installs).

Just start up an xterm and run cpan from the bash prompt:

  bash$ cpan
  cpan> install ExtUtils::F77
  cpan> install Astro::FITS::Header
  cpan> install Inline
  cpan> install PDL

This should install a PDL with the following functionality:

  - base PDL modules
  - PDL::IO::GD
  - PDL::Graphics::TriD
  - PDL::GSL::*
  - PDL::Slatec



=================================================================
                Manual Configuration and Install
=================================================================
In general, the standard install process for perl modules
should work on cygwin.  If you don't want to accept the
default build options for PDL, edit the perldl.conf file.
You'll find that file in the top level PDL folder/directory.

The remaining PDL functionality depends on external libraries
and packages that must be pre-installed before installing PDL.

If you want to use other modules with external dependencies
not available through the Setup.exe from www.cygwin.com
then you'll need to get, build, and install the desired
libraries yourself (HOW-TO notes below).

So the configure/build/install process is:

 Edit the PDL/perldl.conf file as desired

 From the bash$ prompt in the top level PDL/ directory:

   perl Makefile.PL
   make
   make test
   make doctest

 You can test the interactive PDL shell before installing by
 running from the PDL/ top level directory:

   perl -Mblib perldl

 Then, to install the PDL into your system run

   make install



=================================================================
                              FFTW
=================================================================
You'll need to build *version 2* of the FFTW library for PDL.
Version 3 has a new API and is not compatible with this PDL.

  # download the source code if needed, I used wget
  wget http://www.fftw.org/fftw-2.1.5.tar.gz

  # extract the source files
  tar xzf fftw-2.1.5.tar.gz 

  # change to the source directory
  cd fftw-2.1.5/

  # this is the standard GNU build process
  ./configure 
  make
  make check
  make install

The FFTW library built without a hitch and installed in
/usr/local as the default (/usr/local/lib, /usr/local/include,
and /usr/local/info). A clean build of PDL should pick it up.

 

=================================================================
                             PGPLOT
=================================================================
1. build the pgplot library and install.

  Download from http://astro.caltech.edu/~tjp/pgplot

  # Extract the archive file into a source location, I used ~
  $ tar xzf pgplot5.2.tar.gz 
  $ cd ~/pgplot

  # Make an install directory, this is a typical default location
  $ mkdir /usr/local/pgplot

  $ cp drivers.list /usr/local/pgplot/
  $ cd /usr/local/pgplot
  $ vi drivers.list 
  
  Edit drivers.list to enable the drivers you wish but
  uncommenting desired drivers by removing the leading ! on the
  line. Here are the ones I used:

  $ grep -v '^!' drivers.list
    LXDRIV 0 /LATEX     LaTeX picture environment
    NUDRIV 0 /NULL      Null device (no output)                           Std F77
    PPDRIV 1 /PPM       Portable Pixel Map file, landscape
    PPDRIV 2 /VPPM      Portable PIxel Map file, portrait
    PSDRIV 1 /PS        PostScript printers, monochrome, landscape        Std F77
    PSDRIV 2 /VPS       Postscript printers, monochrome, portrait         Std F77
    PSDRIV 3 /CPS       PostScript printers, color, landscape             Std F77
    PSDRIV 4 /VCPS      PostScript printers, color, portrait              Std F77
    TTDRIV 5 /XTERM     XTERM Tektronix terminal emulator                 Std F77
    WDDRIV 1 /WD        X Window dump file, landscape
    WDDRIV 2 /VWD       X Window dump file, portrait
    XWDRIV 1 /XWINDOW   Workstations running X Window System              C
    XWDRIV 2 /XSERVE    Persistent window on X Window System              C
  
  Edit the sys_cygwin configuration file to work with the
  current version of cygwin. (TBD, update this file and pass on
  to pgplot distribution for inclusion)

  $ vi sys_cygwin/g77_gcc.conf 

  # This diff command shows the lines that need changing
  $ diff g77_gcc.conf*
  12c12
  <    XINCL="-I/usr/X11R6/include"
  ---
  >    XINCL="-I/usr/X11R6.4/include"
  48c48
  <    FFLAGD="-fno-backslash -I/usr/include"
  ---
  >    FFLAGD="-fno-backslash"
  58c58
  <    CFLAGC="-DPG_PPU -O2 -DNOMALLOCH -I. -I/usr/include"
  ---
  >    CFLAGC="-DPG_PPU -O2 -DNOMALLOCH -I."
  75c75
  <    LIBS="-L/usr/X11R6/lib -lX11 -lpng -lz"
  ---
  >    LIBS="-L/usr/X11R6.4/lib -lX11"
  
  $ ~/pgplot/makemake ~/pgplot cygwin
  $ make
  $ make clean
  $ make cpg
  $ PGPLOT_DIR="/usr/local/pgplot/"; export PGPLOT_DIR

  Be sure to add PGPLOT_DIR to your environment and add it to
  your PATH as well. Now we can build the PGPLOT module for
  perl. Download from www.cpan.org if needed.

2. Now install the PGPLOT perl module. This is used by
PDL::Graphics::PGPLOT.

  $ tar xzf PGPLOT-2.19.tar.gz
  $ cd PGPLOT-2.19

  # Be sure to set the environment!
  $ export PGPLOT_DIR=/usr/local/pgplot
  $ export PATH=$PGPLOT_DIR:$PATH

  $ perl Makefile.PL

  Hand edit the Makefile generated by Makefile.PL and correct
  the link line.

  $ vi Makefile
     
  Edit the EXTRALIBS = ... and LDLOADLIBS = ... lines to change
  "-lpgplot -lcpgplot" to "-lcpgplot -lpgplot -lpng -lz" 

  The first part of the modified lines look like this:

  EXTRALIBS = -L/usr/X11R6/lib -L/usr/local/pgplot -lcpgplot -lpgplot -lpng -lz -lX11 ...
  LDLOADLIBS = -L/usr/X11R6/lib -L/usr/local/pgplot -lcpgplot -lpgplot -lpng -lz -lX11 ...

  Build it now:

  $ make

  # Lots of tests!
  $ make test

  $ make install

  pgplot library is installed and working. PGPLOT module is
  installed and working.

3. Build PDL configured to use PGPLOT (in perldl.conf file).
   If your pgplot installation worked, it should be picked up
   automatically.



=================================================================
                             PLplot
=================================================================
Now download, build, and install the PLplot library. The LASi
library is a new dependency for plplot which may be either
installed as below or the appropriate option to disable its
build can be used for ./configure.

  $ wget http://www.unifont.org/lasi/download/lasi-1.0.5.tar.gz
  $ tar xzf lasi-1.0.5.tar.gz 
  $ cd lasi-1.0.5
  $ ./configure
  $ make
  $ make check
  $ make install

Now LASi library is in /usr/local default locations. Now
download and build plplot:

  $ wget http://superb-east.dl.sourceforge.net/sourceforge/plplot/plplot-5.6.1.tar.gz
  $ tar xzf plplot-5.6.1.tar.gz 
  $ ./configure --prefix=/usr/local/plplot --disable-tcl --without-qhull --disable-cgm \
                --disable-dyndrivers --disable-octave --disable-gcw 
  $ make
  $ make check
  $ make install

NOTE: be sure to add /usr/local/plplot/bin to your path!

Now you should be able to build PDL and have it pick up the
plplot install. WARNING: If t/plplot.t fails with no messages,
the problem may be DLL address conflicts. If so, you'll need to
run rebaseall per the instructions below.

=================================================================
                            REBASEALL
=================================================================
  1. Exit all cygwin processes, windows, shells, X server,...
  2. Start up a windows CMD shell window (Start->Run cmd)
  3. cd to the cygwin /bin directory (cd c:\cygwin\bin by default)
  4. Run ash in that directory
  5. Run rebaseall (./rebaseall)



=================================================================
                               HDF
=================================================================
TBD



=================================================================
                               NDF
=================================================================
TBD



=================================================================
                              PROJ4
=================================================================
TBD



