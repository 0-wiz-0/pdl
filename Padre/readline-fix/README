Created on: Wed 28 Apr 2010 01:43:15 PM 
Last saved: Wed 28 Apr 2010 01:55:56 PM 

README for Term::ReadLine::Gnu port to win32

Current directory contents:
  Gnu.xs       - modified XS file
  Makefile     - modified post-Makefile.PL to change libreadline.a to libreadline.dll.a
  Makefile.PL  - modified to skip exit for missing termcap, ncurses or curses
  README       - this file


To get a full featured shell working on a win32 system,
we need to have working Term::ReadLine::Gnu support.
I downloaded the pre-built win32 readline library from

  http://gnuwin32.sourceforge.net/packages/readline.htm

and am working through the build failures for
Term-ReadLine-Gnu-1.19.tar.gz on win32 using mingw gcc
version 3.4.5.

Problem 1: The perl Makefile.PL step exited because
there was no termcap/ncurses/curses library.  I commented
out that line because I found no include in the source
for any of those libraries.

Problem 2: The test link of a sample readline using
function failed because the includes/libraries are not
in the paths.  I added --prefix to the Makefile.PL and
now the library is found and the test works.  There are
other options that may be needed for non-default file
locations.

Problem 3: The Gnu.xs failed to compile because the
declarations for str_tbl[], int_tbl[], and fn_tbl[]
all used {} static initialization.  This only works
if the values used are static.  Since for the
readline DLL, they are not known until runtime, I
moved the non-static part of the initialization into
three functions.  The code now compiles.

NOTE: I still need to determine when to call these init
routines and insert the appropriate calls during module
initialization!

Problem 4: There were many errors aboue failed imp_rl_*
dependencies.  I hand-edited the Makefile to replace
the libreadline.a by libreadline.dll.a in the two places
it was called and now the DLL is found.

Problem 5: There are still several tty/termcap/curses
type routines that are not found in the link.  It looks
like the check I commented out in the Makefile.PL may
have been needed after all.  Very poorly documented!
